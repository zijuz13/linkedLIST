技术介绍：
RabbitMQ是一个开源的消息中间件，实现了AMQP规范，即Advanced Message Queuing Protocol,高级消息队列协议，RabbitMQ消息中间件是由erlang语言编写的，而其他语言都有办法通过RabbitMQ提供的接口来进行消息队列的操作，其中具有三个非常重要的角色，producer生产者，consumer消费者以及queue队列。
Producer ：
表示消息的生产者，用于创建消息后发送RabbitMQ的代理服务器上，消息包括有效载荷和标签
Consumer:
表示消息的接收者，例如客户端
Queue:
相当于信箱用于接收生产者的消息存储在消息队列中等待消费者的异步消费
在RabbitMQ中发送方和接收方发送和接受消息的模式主要这几种：


营销管理系统的需求分析
本章节的内容主要是关于本系统的需求分析，根据实地公司实习，并且询问相应需求方的需求后，抽象出需求模型，并进行详细分析后，可以确定本系统包含以下几个功能模块：零售行业营销系统的功能模块、产品管理功能模块、营销活动管理功能模块、统计分析功能模块、交易管理功能模块、用户管理功能模块
系统总体需求分析
在敏捷开发中，软件开发的第一个阶段就是收集和分析需求，在思考什么样的需求需要被采纳时，开发者和需求方需要达成一致，这样最后的产品才能满足大家的需求。所以在软件开发中，需求分析需要格外的仔细。营销管理系统的需求分析给开发者提供了一个最终产品的初步印象，这样，在开发的时候开发者可以设定各模块的优先级，并且利用自己的专业知识来事先思考这些模块是怎么实现的，提前准备，比起后期开发偏离方向再回头修改不仅省时省力，更让开发者和需求方节省了很大的成本。而且没有清晰的需求分析，一旦出现错误的决定有时也会导致严重的后果发生。
营销管理系统对一个公司的重要性可想而知，一个好的营销管理系统不仅能适应多变的公司营销管理策略还能为提升公司的产品地位打下坚实的基础。并且在我们的营销管理系统中，由于公司的业务庞大，经常需要存储数量巨大的用户，并且为了能够精准营销，需要这些用户的信息量丰富以便让公司拥有足够的信息去精细推销自己的产品。并且由于使用人员一般缺乏计算机的专业知识，我们需要对界面进行一定的优化，如果出错尽量不要直接反馈给用户，同时使用人员涉及的部门非常广，因此我们也需要对系统进行更加详细的设计以便根据不同部门用户的特点可以做到都可以很方便运用。同时，也要注意到现在市面上的一些营销管理系统的问题，例如界面简陋，功能单一，存储数据量少，搜索速度慢，无法为公司员工推送精准的用户信息等。我们需要注意这些问题，并且能尽量把问题解决，解决好以便更好的促进公司的利益提升。
同时由于现在公司都会在不断扩大自己的员工数量和工作地点，架构如果能采用微服务分布式并且拥有集群负载均衡的特点，可以为公司日后壮大提升规模后，如果需要增加用户数量减少很大的成本，公司只要简单的部署相应的容器就可以对业务进行扩展。
由于现在数字化营销需要结合个性化的推销手段给用户耳目一新的产品广告视觉，这样能让用户有更强的购买愿望。所以市场营销管理系统还必须要具有个性化邮件和短信的功能，同时需要提供相应的模板方便公司的需求使用用户能更方便的选择自己相应的产品广告模板，精准营销。
市场营销系统的邮件和短信发送功能还需要具有定时功能，不能在用户上班工作时间对用户进行打扰，这时候相应的部门和市场营销部门需要共享用户数据库，用户在相应部门注册与登记信息的时候必定会记录下自己方便的时间，然后相应的市场营销部门的数据库也要进行同步更新，这样市场营销部门可以在用户有空的时候对其发送推广消息，以避免打搅用户休息。同时公司的推广模板不能够一成不变，为了迎合营销需求，公司员工将可以自行创建模板，模板可以是markdown格式创建，也可以是html的方式，这样随着时代的发展，广告模板也能够与时俱进。公司的人数将会随着业务的发展越来越多，如果没有对联系客户进行精细的管理和分组也会造成管理困难的问题。
因此，根据上述问题的分析，可以将企业市场营销管理系统抽象为以下几个主要模块，方便进行进一步设计与开发：
系统需要拥有界面美观的UI，功能需要容易使用不能过于抽象，尽可能结合微服务构架开发前后端分离的系统，满足各个部门员工快速上手的需求，减少培训的消耗。
系统需要有简洁大方的主页可以显示统计信息，因为企业市场营销系统涉及的内容非常广泛，所以主页需要显示各个模块的统计信息，例如当日订单金额，登记在案用户人数，用户分群数量，网站客户流量，市场营销转化利益计算，模板数量，当日新增用户人数，当日推广人数等。用最与时俱进的技术做到更加简洁美观直观的显示信息，做到让公司用户登录系统就懂得从哪里下手。
企业市场营销管理系统也需要拥有鉴权功能，这个鉴权功能需要足够安全，结合到时下最新的加密技术并且能够动态显示菜单，对后台api的权限进行过滤，避免权限不足人员的误操作。
企业市场营销管理系统需要具有消息队列框架的搭建，由于各个部门之间的数据库都不同步，为了能够实现同步该系统必须具有消息队列方便其他部门在新增用户记录的时候也能对市场营销管理系统的数据做到同步更新。
企业市场营销管理系统需要有短信收发和电子邮件收发的基本功能，并且默认就具有相应的模板，方便不需要个性化的需求用户直接使用，而且这个电子邮件的收发也需要依赖到消息队列的使用，并且需要调用诸如阿里云和华为云的短信服务，然后通过消息队列进行异步收发。
企业市场营销系统需要对繁杂的联系人信息进行分类，因为各个部门的人员所面向的用户都各不相同，所以为了能够给各个部门更加精准的推送他们所需要的用户，系统必须具有对搜索结果进行分类，精细过滤的功能，这个过滤功能不能过于简单，必须要对不同的用户的各个条件字段进行相应的聚合，且搜索速度一定要越快越好，在企业中节省的每分每秒都意味着巨大的利益提升。
综上所述，企业市场营销管理系统所面向的用户有系统管理人员，各部门的数据录入操作人员，各部门的营销人员。系统管理人员可以具有管理系统的权限，各部门的数据录入人员可以具有联系人管理模块，联系人分群管理模块，部门信息修改模块的访问权限，各部门的营销人员具有电子邮件模块，短信模块，联系人管理模块，营销业绩概览和分析的访问权限。
系统交互分析
系统外部分析
从上面的分析我们可以知道，企业市场营销管理系统是支撑一个企业利益获取的一个十分重要的系统。一个大型企业内部必然具有多个部门，每个部门下面都具有自己数量庞大的用户群体，所以这些部门想要对自己的用户进行精准营销，必然要用到企业市场营销管理系统。同时，企业市场营销管理系统需要公司的用到公司的账号管理系统的数据，以方便根据不同员工的身份信息显示与其权限相匹配的界面。从分析可以看出，企业市场营销管理系统与企业中各部门的子系统之间的关系一定是紧密相连，密不可分的，系统外部结构如图所示



各部门的用户管理系统在有新的用户详细信息录入后需要通过消息队列实现各自用户管理系统的信息和企业市场营销管理系统的数据库信息达到同步的目的，同时各自部门的营销人员可能在企业市场营销管理系统中对客户的信息进行修改以方便营销所以企业市场营销管理系统也要利用到消息队列保持数据的一致性。各个部门的订单系统需要将他们成交的订单信息内容发送到消息队列，让企业市场营销管理系统的统计分析功能可以获取到营销的成果数据，并且各个部门的部门管理系统也要通过企业营销管理系统获取到本部门的营销统计结果数据，再者公司的账号管理系统需要向企业营销管理系统提供相应的账号安全信息方便企业市场营销管理系统根据不同的用户实现鉴权操作。



系统内部分析
客户管理将收集全渠道的客户信息，满足客户信息的单个创建、批量创建、编辑、删除、批量删除的基础操作，其次在客户分组中可以对不同的用户属性字段进行条件筛选，完成客户数据的过滤为精准化营销提供保证。而电子邮件模块，短信模块需要依赖客户管理的信息进行发送，同时营销活动管理模块需要依赖电子邮件模块和短信模块进行相应的营销活动。并且交易模块还需要依赖订单信息模块，最后统计分析模块也要依赖订单信息模块、交易模块、电子邮件、短信模块和客户管理模块。



客户管理可以对从其他部门的客户管理系统导入的客户数据信息进行查找分析，并且根据不同的字段可以进行精细化查找，查找后的聚合结果还可以被企业市场营销管理系统的统计分析模块利用并显示在主页上，客户管理可以从csv等文件中批量扫描信息，并将信息录入到数据库中去，而这个过程也可以通过消息队列同步到相应部门的子系统数据库中去，形成数据统一，其他部门子系统的客户端的订单信息也会通过消息队列传送到企业营销管理系统中，而系统从消息队列通过异步读取这些订单信息并把相应的统计信息显示在主页的统计分析中。营销活动模块的运行也会调用到电子邮件模块和短信模块，并且每一次调用都会引起统计分析模块的状态变化，而电子邮件模块和短信模块也会通过消息队列调用到华为云或者阿里云的短信或电子邮件发送接口，实现营销信息的异步发送。



用户管理业务的需求分析：
   （1）账号管理：可以设置不同的子账号配置不同的权限进行子账号的管理。
   （2）权限管理：提供子账号不同的权限设置。对于权限划分为操作权限与数据权限两种。
    a．操作权限：包括对于平台各个模块的功能的增删改查操作进行细分。
b．数据权限：对于客户信息、客户记录、素材、营销任务可以设置可见的数据范围。比如本人的数据或者全组织的数据。

统计分析业务的需求分析：
（1）数据接入：在数据中心按进行数据接入，系统提供了多样化的数据接入方式，目前支持服务端API接口这种接入方式来获取源数据。(服务端API接口：采用REST原则设计，使用秘钥授权和身份认证。请求和返回均采用规范的JSON格式，且编码为UTF8。)     
中查看对应的数据错误详情。
（2）营销任务概览：统计时间段内的所有旅程的任务概览。
a．在数据来源内选择筛选时间段     b．在数据来源内选择指定营销任务
   （3）发送报告：统计时间段内某渠道（短信、邮件和微信）的详细数据报告。
a．在数据来源内选择筛选时间段     b．在数据来源内选择指定营销任务 渠道报告：列举这段时间或者某营销任务内的不同渠道的发送素材总数和送达总数，点击“任务明细”可查看任务报告。 任务报告：当前仅可查看单次和重复营销任务的数据报告。也可以查看当前渠道内所有素材的发送报告。    （4）数据导出：可导出邮件、短信相关的数据等所有属于统计报告
用户分析：增长趋势、渠道偏好、消费偏好等；
订单分析：渠道影响、热销商品、客单价等；
渠道分析：发送趋势、转化漏斗、活跃用户等；

营销活动的业务需求分析：
短信、邮件、等全渠道用户生命周期规划建议（新用户培育、复购用户再营销、沉睡用户激活等），营销日程上设定的生命周期活动，对增量用户可不断重复营销任务。合理搭配最优沟通渠道，促进营销转化。 
    单次营销：针对既定得目标受众进行多渠道得推送，可以设置条件分支、随机分支等控件。
    周期营销：周期营销相当于单次任务得周期性运行，重复周期可按周、天、月。
    触发营销：触发营销是由客户事件得触发为开始条件，并且由客户触发事件实时驱动自动流程。实时任务开始后满足触发条件的客户会实时进入任务，未触发的客户不会进入实时任务。
a．触发事件如点击网页按钮等。
b．客户的数据库字段发生属性变更事件等。
营销场景：条件控件
可以增加判断条件，字段属性、互动行为（邮件互动、短信互动、网页互动）等判断条件，
营销场景：随机分支
随机分支就是将同一批用户分为俩大类，客户收到不同的内容，可以验证不同类型的内容对用户的吸引力。

